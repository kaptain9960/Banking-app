{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="{% static 'assets/images/fav.png' %}" type="image/x-icon">
    <title>EazyPay Currency Exchange Calculator - Virtual Bank</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 0;
        }

        /* Navigation Styles */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px 0;
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            color: #667eea !important;
        }

        .main-navbar .nav-link {
            color: #2c3e50;
            font-weight: 500;
            padding: 8px 15px;
            transition: all 0.3s ease;
        }

        .main-navbar .nav-link:hover {
            color: #667eea;
        }

        .dropdown-menu {
            border: none;
            border-radius: 12px;
            padding: 10px;
            margin-top: 10px;
        }

        .dropdown-menu .nav-link {
            padding: 10px 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .dropdown-menu .nav-link:hover {
            background: #f8f9fa;
            color: #667eea;
        }

        .main-content-wrapper {
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding-top: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .exchange-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .info-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .card-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .currency-input-group {
            margin-bottom: 25px;
        }

        .input-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .input-wrapper {
            display: flex;
            gap: 10px;
            align-items: stretch;
        }

        .amount-input {
            flex: 2;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1.3rem;
            font-weight: 600;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .amount-input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .currency-select {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .currency-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .swap-container {
            text-align: center;
            margin: 20px 0;
        }

        .swap-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .swap-btn:hover {
            transform: rotate(180deg) scale(1.1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .result-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin: 25px 0;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .result-amount {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .exchange-rate {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        .info-section {
            margin-bottom: 30px;
        }

        .info-section h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-section p {
            color: #555;
            line-height: 1.7;
            font-size: 1rem;
        }

        .info-section ul {
            margin-top: 10px;
            padding-left: 20px;
        }

        .info-section li {
            color: #555;
            line-height: 1.8;
            margin-bottom: 8px;
        }

        .icon {
            width: 24px;
            height: 24px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .feature-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .feature-item h4 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .feature-item p {
            color: #666;
            font-size: 0.95rem;
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .exchange-card, .info-card {
                padding: 25px;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .input-wrapper {
                flex-direction: column;
            }

            .result-amount {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container-fluid px-4">
            <a class="navbar-brand" href="{% url 'core:money-exchange' %}">üí≥ Virtual Bank</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div
                class="collapse navbar-collapse justify-content-end"
                id="navbar-content"
              >
                <ul class="navbar-nav mr-auto mb-2 mb-lg-0">
                  <li class="nav-item dropdown main-navbar">
                    <a
                      class="nav-link dropdown-toggle"
                      href="javascript:void(0)"
                      data-bs-toggle="dropdown"
                      data-bs-auto-close="outside"
                      >Personal</a
                    >
                    <ul class="dropdown-menu main-menu shadow">
                      <li>
                        <a class="nav-link" href="{% url 'core:payments' %}">
                          Freelancer Payments</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:subscriptions' %}"
                          >Subscriptions</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:security' %}"
                          >Security</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:fees' %}">Fees</a>
                      </li>
                    </ul>
                  </li>
                  <li class="nav-item dropdown main-navbar">
                    <a
                      class="nav-link dropdown-toggle"
                      href="javascript:void(0)"
                      data-bs-toggle="dropdown"
                      data-bs-auto-close="outside"
                      >Business</a
                    >
                    <ul class="dropdown-menu main-menu shadow">
                      <li>
                        <a class="nav-link" href="{% url 'core:business-payments' %}"
                          >Business Payments</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:business-account' %}"
                          >Business Account</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:corporate-card' %}"
                          >Corporate Card</a
                        >
                      </li>
                      <li>
                        <a
                          class="nav-link"
                          href="{% url 'core:expense-management' %}"
                          >Expense Management</a
                        >
                      </li>
                      <li>
                        <a
                          class="nav-link"
                          href="{% url 'core:budgeting-analytics' %}"
                          >Budgeting</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:integrations' %}"
                          >Integrations</a
                        >
                      </li>
                      <li>
                        <a
                          class="nav-link"
                          href="{% url 'core:invoice-management' %}"
                          >Invoice</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:business-security' %}"
                          >Security</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:rewards' %}"
                          >Rewards</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:business-fees' %}"
                          >Fees</a
                        >
                      </li>
                    </ul>
                  </li>
                  <li class="nav-item dropdown main-navbar">
                    <a
                      class="nav-link dropdown-toggle"
                      href="javascript:void(0)"
                      data-bs-toggle="dropdown"
                      data-bs-auto-close="outside"
                      >Company</a
                    >
                    <ul class="dropdown-menu main-menu shadow">
                      <li>
                        <a class="nav-link" href="{% url 'core:about' %}"
                          >About Us</a
                        >
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:career' %}">Career</a>
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:career-details' %}"
                          >Career Details</a
                        >
                      </li>
                      <li class="dropend sub-navbar">
                        <a
                          href="javascript:void(0)"
                          class="dropdown-item dropdown-toggle"
                          data-bs-toggle="dropdown"
                          data-bs-auto-close="outside"
                          >Blog</a
                        >
                        <ul class="dropdown-menu sub-menu shadow">
                          <li>
                            <a class="nav-link" href="{% url 'core:blog' %}">Blog</a>
                          </li>
                          <li>
                            <a class="nav-link" href="{% url 'core:blog-details' %}"
                              >Blog Details</a
                            >
                          </li>
                        </ul>
                      </li>
                      <li>
                        <a class="nav-link" href="{% url 'core:error' %}">Error</a>
                      </li>
                    </ul>
                  </li>
                  <li class="nav-item dropdown main-navbar">
                    <a
                      class="nav-link dropdown-toggle"
                      href="javascript:void(0)"
                      data-bs-toggle="dropdown"
                      data-bs-auto-close="outside"
                      >Help</a
                    >
                    <ul class="dropdown-menu main-menu shadow">
                      <li>
                        <a class="nav-link" href="{% url 'core:help-center' %}"
                          >Help Center</a
                        >
                      </li>
                      <li>
                        <a
                          class="nav-link"
                          href="{% url 'core:help-center-category' %}"
                          >Help Category</a
                        >
                      </li>
                    </ul>
                  </li>
                </ul>
                <div
                  class="right-area header-action d-flex align-items-center max-un"
                >
                  {% if request.user.is_authenticated %}
                  <a href="/admin" class="login cmdn-btn">Admin</a>
                  <a href="{% url 'userauths:sign-out' %}" class="login cmn-btn"
                    >Sign Out</a
                  >
                  {% else %}
                  <a href="{% url 'userauths:sign-in' %}" class="login"
                    >Login</a
                  >
                  <a href="{% url 'userauths:sign-up' %}" class="cmn-btn"
                    >Sign Up
                    <i class="fas fa-caret-right"></i>
                  </a>
                  {% endif %}
                </div>
              </div>
        </div>
    </nav>

    <div class="main-content-wrapper">
    <div class="container">
        <div class="header">
            <h1>üí± Currency Exchange Center</h1>
            <p>Real-time currency conversion powered by live exchange rates</p>
        </div>

        <div class="main-content">
            <!-- Exchange Card -->
            <div class="exchange-card">
                <h2 class="card-title">Convert Currency</h2>
                
                <div class="currency-input-group">
                    <label class="input-label">From</label>
                    <div class="input-wrapper">
                        <input type="number" id="fromAmount" class="amount-input" value="1" min="0" step="0.01" placeholder="0.00">
                        <select id="fromCurrency" class="currency-select">
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                            <option value="JPY">JPY</option>
                            <option value="NGN">NGN</option>
                            <option value="CAD">CAD</option>
                            <option value="AUD">AUD</option>
                            <option value="CHF">CHF</option>
                            <option value="CNY">CNY</option>
                            <option value="INR">INR</option>
                        </select>
                    </div>
                </div>

                <div class="swap-container">
                    <button class="swap-btn" id="swapBtn">‚áÖ</button>
                </div>

                <div class="currency-input-group">
                    <label class="input-label">To</label>
                    <div class="input-wrapper">
                        <input type="number" id="toAmount" class="amount-input" value="0.00" readonly>
                        <select id="toCurrency" class="currency-select">
                            <option value="EUR">EUR</option>
                            <option value="USD">USD</option>
                            <option value="GBP">GBP</option>
                            <option value="JPY">JPY</option>
                            <option value="NGN">NGN</option>
                            <option value="CAD">CAD</option>
                            <option value="AUD">AUD</option>
                            <option value="CHF">CHF</option>
                            <option value="CNY">CNY</option>
                            <option value="INR">INR</option>
                        </select>
                    </div>
                </div>

                <div class="result-display">
                    <div class="result-amount" id="resultAmount">Enter amount to convert</div>
                    <div class="exchange-rate" id="exchangeRate"></div>
                </div>
            </div>

            <!-- Information Card -->
            <div class="info-card">
                <h2 class="card-title">About Currency Exchange</h2>
                
                <div class="info-section">
                    <h3>
                        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        How It Works
                    </h3>
                    <p>Our currency exchange tool uses real-time exchange rates from trusted financial data providers. Simply enter the amount you want to convert, select your currencies, and see instant results. The rates are updated regularly to ensure accuracy.</p>
                </div>

                <div class="info-section">
                    <h3>
                        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Key Features
                    </h3>
                    <ul>
                        <li><strong>Real-Time Rates:</strong> Access up-to-date exchange rates from global markets</li>
                        <li><strong>Multiple Currencies:</strong> Support for major world currencies including USD, EUR, GBP, NGN, and more</li>
                        <li><strong>Instant Conversion:</strong> Get results immediately as you type</li>
                        <li><strong>User-Friendly:</strong> Simple interface designed for quick conversions</li>
                    </ul>
                </div>

                <div class="feature-grid">
                    <div class="feature-item">
                        <h4>üîí Secure</h4>
                        <p>Bank-grade security for all your transactions</p>
                    </div>
                    <div class="feature-item">
                        <h4>‚ö° Fast</h4>
                        <p>Lightning-quick conversion calculations</p>
                    </div>
                    <div class="feature-item">
                        <h4>üìä Accurate</h4>
                        <p>Live data from trusted financial sources</p>
                    </div>
                    <div class="feature-item">
                        <h4>üåç Global</h4>
                        <p>Support for currencies worldwide</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const fromAmount = document.getElementById('fromAmount');
        const toAmount = document.getElementById('toAmount');
        const fromCurrency = document.getElementById('fromCurrency');
        const toCurrency = document.getElementById('toCurrency');
        const swapBtn = document.getElementById('swapBtn');
        const resultAmount = document.getElementById('resultAmount');
        const exchangeRate = document.getElementById('exchangeRate');

        // API endpoint - using exchangerate-api.com (free tier)
        const API_URL = 'https://api.exchangerate-api.com/v4/latest/';

        // Convert currency
        async function convertCurrency() {
            const amount = parseFloat(fromAmount.value);
            const from = fromCurrency.value;
            const to = toCurrency.value;

            if (!amount || amount <= 0) {
                resultAmount.textContent = 'Enter amount to convert';
                exchangeRate.textContent = '';
                toAmount.value = '0.00';
                return;
            }

            try {
                // Show loading state
                resultAmount.textContent = 'Converting...';
                exchangeRate.textContent = '';

                // Fetch exchange rates
                const response = await fetch(`${API_URL}${from}`);
                const data = await response.json();

                if (data.rates && data.rates[to]) {
                    const rate = data.rates[to];
                    const converted = (amount * rate).toFixed(2);
                    
                    // Update display
                    toAmount.value = converted;
                    resultAmount.textContent = `${amount} ${from} = ${converted} ${to}`;
                    exchangeRate.textContent = `1 ${from} = ${rate.toFixed(4)} ${to}`;
                } else {
                    resultAmount.textContent = 'Conversion failed';
                    exchangeRate.textContent = 'Please try again';
                }
            } catch (error) {
                console.error('Error:', error);
                resultAmount.textContent = 'Error fetching rates';
                exchangeRate.textContent = 'Please check your connection';
            }
        }

        // Swap currencies
        swapBtn.addEventListener('click', () => {
            const tempCurrency = fromCurrency.value;
            fromCurrency.value = toCurrency.value;
            toCurrency.value = tempCurrency;

            const tempAmount = fromAmount.value;
            fromAmount.value = toAmount.value;
            
            convertCurrency();
        });

        // Event listeners
        fromAmount.addEventListener('input', convertCurrency);
        fromCurrency.addEventListener('change', convertCurrency);
        toCurrency.addEventListener('change', convertCurrency);

        // Initial conversion
        convertCurrency();
    </script>
</body>
</html>